<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }



        main {
            height: 200px;
            width: 100%;
            display: grid;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            grid-template-rows: 50% 50%;
        }


        button {


            padding: 1rem;
            background-color: green;

            color: white;
            border: none;
            border-radius: 10px;
        }

        ul {
            color: green;
            padding: 4rem;
        }
    </style>
</head>

<body>

    <h1>Libri</h1>
    <main>
        <div>
            <p>Crime</p>
            <button onClick="aggiungi(0)">Aggiungi alla lista</button>
        </div>
        <div>
            <p>Pinocchio</p>
            <button onClick="aggiungi(1)">Aggiungi alla lista</button>
        </div>
        <div>
            <p>Gli argonauti</p>
            <button onClick="aggiungi(2)">Aggiungi alla lista</button>
        </div>
        <div>
            <p>Tecnologie Web</p>
            <button onClick="aggiungi(3)">Aggiungi alla lista</button>
        </div>
        <div>
            <p>La rosa</p>
            <button onClick="aggiungi(4)">Aggiungi alla lista</button>
        </div>
    </main>
    <h1>Lista di lettura</h1>
    <ul>proba</ul>

    <script>

        class Elemento {
            constructor(nome, numero) {
                this._nome = nome;
                this._numero = numero;
            }
            get nome() {
                return this._nome;
            }
            get numero() {
                return this._numero;
            }


            incrementa() {
                this._numero = this._numero + 1;
            }
        }


        let lista = [];

        function aggiungi(num) {
            const parola = document.getElementsByTagName('p')[num].textContent;
            console.log(parola);
            lista.push(parola);
            aggiorna();
        }



        function aggiorna() {
            const myUl = document.getElementsByTagName('ul')[0];
            myUl.innerHTML = '';
            lista.sort();
            console.log('ooo')
            //let uniqueValues = Array.from(new Set(lista));
            //se Ã¨ un duplicato lo aggiunge
            let uniqueValues = [];

            for (let i = 0; i < lista.length; i++) {
                const p = lista[i];
                let isDuplicate = false;

                for (let j = 0; j < uniqueValues.length; j++) {

                    if (uniqueValues[j].nome == p) {
                        console.log('ciao')
                        uniqueValues[j].incrementa()
                        isDuplicate = true;
                        break;

                    }
                }

                if (!isDuplicate) {
                    uniqueValues.push(new Elemento(p, 1))

                }

            }

            for (let i = 0; i < uniqueValues.length; i++) {
                const myLi = document.createElement('li');
                myLi.textContent = uniqueValues[i].nome + ': ' + uniqueValues[i].numero;
                myUl.appendChild(myLi);
            }
            aggiornaBottoni();

        }
        function aggiornaBottoni() {
            const buttons = document.getElementsByTagName('button');
            const paragraphs = document.getElementsByTagName('p');

            // Conta direttamente dalla lista
            for (let i = 0; i < paragraphs.length; i++) {
                const parola = paragraphs[i].textContent;
                const conteggio = lista.filter(item => item === parola).length;

                if (conteggio >= 10) {
                    buttons[i].disabled = true;
                    buttons[i].textContent = "Raggiunto il limite (10)";
                } else {
                    buttons[i].disabled = false;
                    buttons[i].textContent = "Aggiungi alla lista";
                }
            }
        }



    </script>
</body>

</html>